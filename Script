-- https://linkvertise.com/3695086/q3elBoQGpIUj?o=sharing


-- Create Key 
loadstring(game:HttpGet("https://raw.githubusercontent.com/DavayzoYT/Tsuvayzo/refs/heads/main/KeySystem"))()
local keyHour = os.date("%H")
local ScriptKey = genKey(keyHour)
print(ScriptKey)

--  Generate Token
local tkFuncCounter = 0
local tksF = {}
function genToken()
    tkFuncCounter += 1
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$()[]{}?!+%=@&#$"
    local pass = "T" .. tkFuncCounter .. "_"

    -- Chunk 1
    for i = 0, 4 do
        local index = math.random(1, #chars)
        pass = pass .. chars:sub(index, index)
    end
    pass = pass .. "-"

    -- Chunk 2
    for i = 0, 4 do
        local index = math.random(1, #chars)
        pass = pass .. chars:sub(index, index)
    end
    pass = pass .. "-"

    -- Chunk 3
    for i = 0, 4 do
        local index = math.random(1, #chars)
        pass = pass .. chars:sub(index, index)
    end
    pass = pass .. "-"

    -- Chunk 4
    for i = 0, 4 do
        local index = math.random(1, #chars)
        pass = pass .. chars:sub(index, index)
    end

    table.insert(tksF, pass)
    return pass
end

-- Configs
local RARITY = "Celestial"
local SPEED = 2450

-- Main vars
local p = game.Players.LocalPlayer
local c = p.Character or p:WaitForChild("Character")
local hrp = c.HumanoidRootPart or c:WaitForChild("HumanoidRootPart")
local h = c.Humanoid or c:WaitForChild("Humanoid")
local rs = game:GetService("RunService")
local ts = game:GetService("TweenService")
local pathY = 82
local pathZ = 134.2

-- Update script
p.CharacterAdded:Connect(function(chr)
    c = chr
    h = chr:WaitForChild("Humanoid")
    hrp = chr:WaitForChild("HumanoidRootPart")
end)

-- Nearest brainrot
function getBrainrot(Bt1)
    local t1 = game.Workspace.ActiveBrainrots:FindFirstChild(RARITY) or game.Workspace:FindFirstChild("ActiveLuckyBlocks")
    if t1 then
        local t2 = t1:FindFirstChild("RenderedBrainrot") or t1:FindFirstChild("NaturalSpawnLuckyBlock_" .. RARITY)
        if t2 then
            local champion = nil
            local championpos = 99999999
            for _, b in ipairs(t2:GetDescendants()) do
                if b:IsA("ProximityPrompt") then
                    local pos = b.Parent.Position
                    if (pos - hrp.Position).Magnitude < championpos then
                       championpos = (pos - hrp.Position).Magnitude
                       champion = b.Parent
                   end
                end
            end
            if champion then
                return champion
            else
                Bt1.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                Bt1.Text = "NOT FOUND"
                task.wait(0.55)
                Bt1.Text = "Get " .. RARITY
                Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                return nil
            end
        end
        Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        Bt1.Text = "Get " .. RARITY
    end
end

-- Teleport function
function Tp(pos)
    if (pos - hrp.Position).Magnitude < 350 then
        hrp.CFrame = CFrame.new(pos)
        hrp.AssemblyLinearVelocity = Vector3.zero
        hrp.AssemblyAngularVelocity = Vector3.zero
    else
        local tween = ts:Create(hrp, TweenInfo.new((pos - hrp.Position).Magnitude / SPEED, Enum.EasingStyle.Linear, Enum.EasingDirection.Out, 0, false, 0), {CFrame = CFrame.new(pos)})
        tween:Play()
        tween.Completed:Wait()
        hrp.AssemblyLinearVelocity = Vector3.zero
        hrp.AssemblyAngularVelocity = Vector3.zero
    end
end

-- Esp function
function Esp(mdl)
    local esp = Instance.new("Highlight", mdl)
    esp.Name = "TsuvayzoESPHighline_" .. genToken()
    esp.FillColor = Color3.fromRGB(0, 255, 0)
    esp.FillTransparency = 0.5
    esp.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    print("Created Highlight! " .. esp.Name)
end

-- Teleport to brainrot
function tpBrainrot(Bt1)
    Bt1.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    Bt1.Active = false
    local brainrot = getBrainrot(Bt1)
    if not brainrot then
            Bt1.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            Bt1.Text = "NOT FOUND"
            task.wait(0.55)
            Bt1.Text = "Get " .. RARITY
            Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            Bt1.Active = true
            return
    end
    Esp(brainrot.Parent)
    Tp(Vector3.new(50, pathY, pathZ))
    Tp(Vector3.new(brainrot.Position.X, pathY, pathZ))
    if brainrot:FindFirstChildOfClass("ProximityPrompt") then
        local pp = brainrot:FindFirstChildOfClass("ProximityPrompt")
        pp.HoldDuration = 0
        Tp(brainrot.Position)
        task.wait(0.3)
        pp:InputHoldBegin()
        task.wait(0.2)
        pp:InputHoldEnd()
        Tp(Vector3.new(hrp.Position.X, pathY, pathZ))
        Tp(Vector3.new(50, pathY, pathZ))
    else
        Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        Bt1.Active = true
        return
    end
        Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    Bt1.Active= true
end

local sg = Instance.new("ScreenGui", p.PlayerGui)
sg.Name = "TsuvayzoGUIScreenGui_" .. genToken()
sg.ResetOnSpawn = false

local Bt1 = Instance.new("TextButton", sg)
Bt1.Name = "TsuvayzoGUITextButton_" .. genToken()
Bt1.TextScaled = true
Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
Bt1.TextColor3 = Color3.fromRGB(255, 255, 255)
Bt1.Text = "Get " .. RARITY
Bt1.Size = UDim2.new(0, 150, 0, 45)
Bt1.Position = UDim2.new(0, 10, 0, 10)
Bt1.AnchorPoint = Vector2.new(0, 0)

local Cn1 = Instance.new("UICorner", Bt1)
Cn1.CornerRadius = UDim.new(0, 12)
Cn1.Name = "TsuvayzoGUIUICorner_" .. genToken()

Bt1.MouseButton1Click:Connect(function()
    local Token = genToken()
    print("Token: " .. Token)
    tpBrainrot(Bt1)
end)

Bt1.Size = UDim2.new(0, 0.1, 0, 0.1)

-- Extern Key Gui

local Players   = game:GetService("Players")
local player    = Players.LocalPlayer
local pgui      = player:WaitForChild("PlayerGui", 8)

local sg = Instance.new("ScreenGui")
sg.ResetOnSpawn = false
sg.Parent = pgui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 290, 0, 165)
frame.Position = UDim2.new(0.5, -145, 0.5, -82)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
frame.BorderSizePixel = 0
frame.Parent = sg

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 38)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.Text = "Tsuvayzo Key System"
title.TextColor3 = Color3.fromRGB(230, 230, 245)
title.TextSize = 23
title.Parent = frame

-- Input field
local input = Instance.new("TextBox")
input.Size = UDim2.new(0.86, 0, 0, 38)
input.Position = UDim2.new(0.07, 0, 0.29, 0)
input.BackgroundColor3 = Color3.fromRGB(34, 34, 44)
input.BorderSizePixel = 0
input.Font = Enum.Font.Gotham
input.PlaceholderText = "https://linkvertise.com/3695086/q3elBoQGpIUj?o=sharing"
input.Text = ""
input.TextColor3 = Color3.fromRGB(215, 215, 235)
input.TextSize = 17
input.ClearTextOnFocus = false
input.Parent = frame

local boxcorner = Instance.new("UICorner")
boxcorner.CornerRadius = UDim.new(0, 7)
boxcorner.Parent = input

-- Submit button
local submit = Instance.new("TextButton")
submit.Size = UDim2.new(0.42, 0, 0, 42)
submit.Position = UDim2.new(0.07, 0, 0.57, 0)
submit.BackgroundColor3 = Color3.fromRGB(40, 155, 80)
submit.BorderSizePixel = 0
submit.Font = Enum.Font.GothamSemibold
submit.Text = "Submit"
submit.TextColor3 = Color3.new(1,1,1)
submit.TextSize = 17
submit.Parent = frame

local submitcorner = Instance.new("UICorner")
submitcorner.CornerRadius = UDim.new(0, 8)
submitcorner.Parent = submit

-- Copy button
local cp1 = Instance.new("TextButton")
cp1.Size = UDim2.new(0.42, 0, 0, 42)
cp1.Position = UDim2.new(0.51, 0, 0.57, 0)
cp1.BackgroundColor3 = Color3.fromRGB(135, 40, 40)
cp1.BorderSizePixel = 0
cp1.Font = Enum.Font.GothamSemibold
cp1.Text = "Copy"
cp1.TextColor3 = Color3.fromRGB(0, 0, 255)
cp1.TextSize = 17
cp1.Parent = frame

local ccorner = Instance.new("UICorner")
ccorner.CornerRadius = UDim.new(0, 8)
ccorner.Parent = cancel

submit.MouseButton1Click:Connect(function()
    local entered = input.Text:gsub("%s+", "")  -- remove all whitespace

    if entered == ScriptKey then
        sg:Destroy()
        -- The protected code continues here
        -- print("Key correct → executing main script")
        Bt1.Size = UDim2.new(0, 150, 0, 45)
    else
        -- Wrong key → brief red flash
        input.BackgroundColor3 = Color3.fromRGB(75, 30, 30)
        task.delay(0.45, function()
            if input and input.Parent then
                input.BackgroundColor3 = Color3.fromRGB(34, 34, 44)
            end
        end)
    end
end)

-- 
local b = Instance.new("TextButton")
b.Name = "X_Skip"
b.Size = UDim2.new(0, 32, 0, 32)
b.Position = UDim2.new(1, -40, 0, 5)
b.BackgroundColor3 = Color3.fromRGB(210, 30, 30)
b.Text = "X"
b.TextColor3 = Color3.new(1,1,1)
b.Font = Enum.Font.SourceSansBold
b.TextSize = 24
b.BorderSizePixel = 0
b.ZIndex = 100
b.Parent = pgui  -- ← uses the existing 'pgui' variable from your script

local cr = Instance.new("UICorner")
cr.CornerRadius = UDim.new(0, 6)
cr.Parent = b

b.MouseButton1Click:Connect(function()
    if sg and sg.Parent then
        sg:Destroy()           -- destroys the key system ScreenGui
    end
    for _, obj in ipairs(pgui:GetChildren()) do
        if obj:IsA("ScreenGui") and obj:FindFirstChild("Tsuvayzo Key System", true) then
            obj:Destroy()
        end
    end
    b:Destroy()                -- remove the button itself
end)

cp1.MouseButton1Click:Connect(function()
    setclipboard(tostring("https://linkvertise.com/3695086/q3elBoQGpIUj?o=sharing"))
end)
