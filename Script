pcall(function()
-- Configs
local RARITY = "Celestial"
local SPEED = 2000

-- Main vars
local p = game.Players.LocalPlayer
local c = p.Character or p:WaitForChild("Character")
local hrp = c.HumanoidRootPart or c:WaitForChild("HumanoidRootPart")
local h = c.Humanoid or c:WaitForChild("Humanoid")
local rs = game:GetService("RunService")
local ts = game:GetService("TweenService")
local pathY = 82
local pathZ = 134.2

-- Update script
p.CharacterAdded:Connect(function(chr)
    c = chr
    h = chr:WaitForChild("Humanoid")
    hrp = chr:WaitForChild("HumanoidRootPart")
end)

-- Nearest brainrot
function getBrainrot()
    local t1 = game.Workspace.ActiveBrainrots:FindFirstChild(RARITY)
    if t1 then
        local t2 = t1:FindFirstChild("RenderedBrainrot")
        if t2 then
            local champion = nil
            local championpos = 99999999
            for _, b in ipairs(t2:GetDescendants()) do
                if b:IsA("ProximityPrompt") then
                    local pos = b.Parent.Position
                    if (pos - hrp.Position).Magnitude < championpos then
                       championpos = (pos - hrp.Position).Magnitude
                       champion = b.Parent
                   end
                end
            end
            if champion then
                return champion
            else
                return nil
            end
        end
    end
    return nil
end

-- Teleport function
function Tp(pos)
    if (pos - hrp.Position).Magnitude < 350 then
        hrp.CFrame = CFrame.new(pos)
        hrp.AssemblyLinearVelocity = Vector3.zero
        hrp.AssemblyAngularVelocity = Vector3.zero
    else
        local tween = ts:Create(hrp, TweenInfo.new((pos - hrp.Position).Magnitude / SPEED, Enum.EasingStyle.Linear, Enum.EasingDirection.Out, 0, false, 0), {CFrame = CFrame.new(pos)})
        tween:Play()
        tween.Completed:Wait()
        hrp.AssemblyLinearVelocity = Vector3.zero
        hrp.AssemblyAngularVelocity = Vector3.zero
    end
end

-- Generate random pass
function randomPass(size)
    local pass = ""
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyt0123456789$@"

    for i = 1, size do
        local index = math.random(1, #chars)
        pass = pass .. chars:sub(index, index)
    end
    return pass
end

-- Esp function
function Esp(mdl)
    local esp = Instance.new("Highlight", mdl)
    esp.Name = "TsuvayzoESPHighline_" .. randomPass(12)
    esp.FillColor = Color3.fromRGB(0, 255, 0)
    esp.FillTransparency = 0.5
    esp.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    print("Created Highlight! " .. esp.Name)
end

-- Teleport to brainrot
function tpBrainrot(Bt1)
    Bt1.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    Bt1.Active = false
    local brainrot = getBrainrot()
    if not brainrot then
        Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        Bt1.Active = true
        return
    end
    Esp(brainrot.Parent)
    Tp(Vector3.new(50, pathY, pathZ))
    Tp(Vector3.new(brainrot.Position.X, pathY, pathZ))
    if brainrot:FindFirstChild("TakePrompt") then
        local pp = brainrot:FindFirstChild("TakePrompt")
        pp.HoldDuration = 0
        Tp(brainrot.Position)
        task.wait(0.3)
        pp:InputHoldBegin()
        task.wait(0.2)
        pp:InputHoldEnd()
        Tp(Vector3.new(hrp.Position.X, pathY, pathZ))
        Tp(Vector3.new(50, pathY, pathZ))
    else
        Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        Bt1.Active = true
        return
    end
        Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    Bt1.Active= true
end

local sg = Instance.new("ScreenGui", p.PlayerGui)
sg.Name = "TsuvayzoGUIScreenGui_" .. randomPass(12)
sg.ResetOnSpawn = false

local Bt1 = Instance.new("TextButton", sg)
Bt1.Name = "TsuvayzoGUITextButton_" .. randomPass(12)
Bt1.TextScaled = true
Bt1.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
Bt1.TextColor3 = Color3.fromRGB(255, 255, 255)
Bt1.Text = "Get " .. RARITY
Bt1.Size = UDim2.new(0, 150, 0, 45)
Bt1.Position = UDim2.new(0, 10, 0, 10)
Bt1.AnchorPoint = Vector2.new(0, 0)

local Cn1 = Instance.new("UICorner", Bt1)
Cn1.CornerRadius = UDim.new(0, 12)
Cn1.Name = "TsuvayzoGUIUICorner_" .. randomPass(12)

local PCounter = 0
Bt1.MouseButton1Click:Connect(function()
    PCounter += 1
    local Tokens = {}
    local Token = "T" .. PCounter .. "_" .. randomPass(6)
    Tokens[tostring(PCounter)] = Token
    print("Token: " .. Tokens[tostring(PCounter)])
    Bt1.Text = "Token: " .. Tokens[tostring(PCounter)]
    task.wait(1)
    Bt1.Text = "Get " .. RARITY
    tpBrainrot(Bt1)
end)
end)
